<!-- File: show_post.html -->
<!-- Author: Letitia Caspersen (letitiac@bu.edu), 2/19/2026 -->
<!-- HTML page for mini insta, showing a single post -->

{% extends 'mini_insta/base.html' %}
{% load static %}

{% block content %}
<div class="post_detail">
    <h2>@{{ post.profile.username }}</h2>
    <p><small>{{ post.timestamp }}</small></p>

    <div class="photo_grid">
        {% with post.get_all_photos as photos %}
        {% if photos %}
            {% for photo in photos %}
            <div class="photo">
                <img src="{{ photo.get_image_url }}" alt="Post Photo">
            </div>
            {% endfor %}
        {% else %}
            <img src="{% static 'mini_insta/no_image.jpg' %}" alt="No Image">
        {% endif %}
        {% endwith %}
    </div>

    {% with likes=post.get_all_like %}
    {% if likes %}
    <p class="likes_line">
        <small>Liked by <strong>@{{ likes.0.profile.username }}</strong>
        {% if likes|length > 1 %}
            and {{ likes|length|add:"-1" }} other{{ likes|length|add:"-1"|pluralize }}
        {% endif %}
        </small>
    </p>
    {% endif %}
    {% endwith %}

    <p>{{ post.caption }}</p>

    <div class="comments">
        {% for comment in post.get_all_comments %}
        <div class="comment">
            <span class="comment_username">@{{ comment.profile.username }}</span>
            <span class="comment_text">{{ comment.text }}</span>
        </div>
        {% endfor %}
    </div>

    <div class="post_actions">
        <a href="{% url 'show_profile' post.profile.pk %}"><button type="button">Back to profile</button></a>
        <a href="{% url 'update_post' post.pk %}"><button type="button">Edit</button></a>
        <a href="{% url 'delete_post' post.pk %}"><button type="button">Delete</button></a>
    </div>
</div>
{% endblock %}
